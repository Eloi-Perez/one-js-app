function getSearch(){let e=searchInput.value.toLowerCase();errorDiv.innerText="",pokemonRepository.find(e)}function handleInput(e){pokemonRepository.cleanList(),errorDiv.innerText="";const t=e.target.value.toLowerCase();let n=pokemonRepository.getAll(),o=n;!0===isNaN(t)?(o=n.filter(e=>-1!==e.name.indexOf(t)),0===o.length&&(errorDiv.innerText="This Pokemon is not in the list, check spelling please.")):t>=1&&t<=151?o=[n[t-1]]:""!=t&&(errorDiv.innerText="This list only contains Pokemons 1-151"),o.map(e=>{pokemonRepository.addListItem(e)})}const capitalize=e=>"string"!=typeof e?"":e.charAt(0).toUpperCase()+e.slice(1),errorDiv=document.querySelector("#error");let pokemonRepository=(()=>{function e(){m.appendChild(p)}function t(){m.hasChildNodes()&&m.removeChild(p)}function n(){return u}function o(e){"object"==typeof e&&"name"in e?u.push(e):console.error("%cpokemonRepository.add() can only add Objects that contains the properties: name%c, height and type.","color:white;","color:grey; text-decoration: line-through;")}function i(){return e(),fetch(h).then(e=>e.json()).then(e=>{e.results.forEach(e=>{let t={name:e.name,detailsUrl:e.url};o(t)}),t()}).catch(e=>{console.error(e),t()})}function l(n){e();let o=n.detailsUrl;return fetch(o).then(e=>e.json()).then(e=>{n.imageUrl=e.sprites.front_default,n.height=e.height,n.weight=e.weight,n.types=e.types,t()}).catch(e=>{console.error(e),t()})}function a(e){let t=document.querySelector(".pokemon-list"),n=document.createElement("li");n.classList.add("col-lg-3","col-md-4");let o=document.createElement("button");o.innerText=capitalize(e.name),o.classList.add("pokemonButton","p-2"),o.setAttribute("data-bs-toggle","modal"),o.setAttribute("data-bs-target","#mainModal"),o.addEventListener("click",()=>{s(e)}),n.appendChild(o),t.appendChild(n)}function d(){let e=document.querySelector(".pokemon-list");for(;e.firstChild;)e.removeChild(e.firstChild)}function r(e,t,n,o,...i){function l(e){v=e.clientX}function a(e){L=e.clientX}function d(){void 0!==n&&L<v&&s(n),void 0!==o&&L>v&&s(o)}f.innerHTML="";let r=document.createElement("div"),c=document.createElement("div");c.classList.add("modal-header");let m=document.createElement("h1");m.classList.add("modal-title"),m.innerText=e,c.appendChild(m);let p=document.createElement("button");p.classList.add("btn-close"),p.setAttribute("type","button"),p.setAttribute("data-bs-dismiss","modal"),p.setAttribute("aria-label","Close"),c.appendChild(p),r.appendChild(c),bodyElement=document.createElement("div"),bodyElement.classList.add("modal-body","container-fluid");let u=document.createElement("div");u.classList.add("row");let h=document.createElement("div");h.classList.add("col-6");let y=document.createElement("img");y.setAttribute("src",t),y.setAttribute("width","192px"),y.setAttribute("height","192px"),y.classList.add("modal-img"),h.appendChild(y),u.appendChild(h);let E=document.createElement("div");E.classList.add("col-6","align-self-center");let b,g,v,L,k=document.createElement("ul");k.classList.add("modal-list"),i.map(e=>{let t=document.createElement("li");t.innerText=e,k.appendChild(t)}),E.appendChild(k),u.appendChild(E),bodyElement.appendChild(u),r.appendChild(bodyElement),footerElement=document.createElement("div"),footerElement.classList.add("modal-footer"),void 0!==n&&(b=document.createElement("button"),b.classList.add("btn","btn-secondary"),b.setAttribute("type","button"),b.innerText="Previous",b.addEventListener("click",()=>{s(n)}),footerElement.appendChild(b)),void 0!==o&&(g=document.createElement("button"),g.classList.add("btn","btn-primary"),g.setAttribute("type","button"),g.innerText="Next",g.addEventListener("click",()=>{s(o)}),footerElement.appendChild(g)),r.appendChild(footerElement),f.appendChild(r),window.PointerEvent&&(r.addEventListener("pointerdown",l,!0),r.addEventListener("pointermove",a,!0),r.addEventListener("pointerup",d,!0),r.addEventListener("pointercancel",d,!0))}function s(e){l(e).then(()=>{let t=u[u.indexOf(e)-1],n=u[u.indexOf(e)+1],o="#"+(u.indexOf(e)+1),i="Height: "+e.height+"m",l="Weight: "+e.weight+"Kg",a=[];e.types.map(e=>{a.push(capitalize(e.type.name))});let d="Types: "+a.join(", ");r(capitalize(e.name),e.imageUrl,t,n,o,i,l,d)})}function c(e){let t=Number(e);if(!1===isNaN(t)){if(!(t>=1&&t<=151))return errorDiv.innerText="This list only contains Pokemons 1-151",console.warn("This list only contains Pokemons 1-151");{let e=u[t-1];myModal.show(),s(e)}}else{let t=u.findIndex(t=>t.name===e);if(-1===t)return errorDiv.innerText="This Pokemon is not in the list, check spelling please.",console.warn("This Pokemon is not in the list, check spelling please.");{let e=u[t];myModal.show(),s(e)}}}let m=document.querySelector("#loading"),p=document.createElement("p");p.innerText="Loading...";let u=[],h="https://pokeapi.co/api/v2/pokemon/?limit=151",f=document.querySelector(".modal-content");return{add:o,find:c,getAll:n,addListItem:a,cleanList:d,showDetails:s,loadList:i,loadDetails:l}})();pokemonRepository.loadList().then(()=>{pokemonRepository.getAll().map(e=>{pokemonRepository.addListItem(e)})});let myModal=new bootstrap.Modal(document.querySelector("#mainModal"),{});const searchInput=document.querySelector("#site-search"),searchBtt=document.querySelector("#searchButton");searchBtt.addEventListener("click",e=>{e.preventDefault(),getSearch()}),searchInput.oninput=handleInput;